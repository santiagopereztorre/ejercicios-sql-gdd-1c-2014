-- Realizar una función que dado un artículo y una fecha, retorne el stock que existía a 
-- esa fecha. DROP FUNCTION mi_funcion_2CREATE FUNCTION mi_funcion_2(	@prod_codigo char(8),	@fecha datetime)RETURNS decimal(12,2)BEGIN	DECLARE @stock_actual decimal(12,2), @stock_vendido decimal(12,2)		SELECT @stock_actual = SUM(stoc_cantidad)		FROM dbo.STOCK		WHERE stoc_producto = @prod_codigo			SELECT @stock_vendido = SUM(item_cantidad)		FROM dbo.Item_Factura			INNER JOIN Factura ON item_tipo = fact_tipo AND item_sucursal = fact_sucursal AND item_numero = fact_numero		WHERE item_producto = @prod_codigo			AND fact_fecha BETWEEN @fecha AND GETDATE()		IF ISNULL(@stock_actual, 0) = 0		RETURN -1			IF ISNULL(@stock_vendido, 0) = 0		RETURN -2				RETURN @stock_actual - @stock_vendidoENDSELECT dbo.mi_funcion_2('00000102', '01/01/2011')SELECT dbo.mi_funcion_2('00000102', '01/01/2012')